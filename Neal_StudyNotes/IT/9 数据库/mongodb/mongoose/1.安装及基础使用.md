##  二、**mongoose** 的安装以及使用

 官网:https://mongoosejs.com/

####   **1.** 安装

>  npm i mongoose --save

####   **2**、引入 **mongoose** 并连接数据库

~~~js
const mongoose = require('mongoose'); 
mongoose.connect('mongodb://localhost/test'); 
// 如果有账户密码需要采用下面的连接方式:
mongoose.connect('mongodb://用户名:密码@IP地址:27017/数据库名');
~~~



####  3、定义 **Schema(集合结构)**

> 确定该集合使用的数据结构 ,就是字段名及字段设置的约束规则

~~~js
var UserSchema=mongoose.Schema({ 
  name: String,
  age:Number,
  status:'number' 
})
~~~



####  4、创建数据模型

> ​	根据结合结构生成数据模型

 ~~~js
// 语法
mongoose.model( '模型名称(首字母大写)',集合结构Schema对象, '数据库集合名称' )
# 参数3是可选项,如不选:会使用模型名称+s作为数据库集合名称去设置

 ~~~



 5、查找数据

 var User=mongoose.model('User', UserSchema);

 User.find({},function(err,docs){ if(err){

 console.log(err);

 return; }

 console.log(docs); })

 6、增加数据

 var u=new User({ //实例化模型 传入增加的数据 name:'lisi2222333',

 age:20,

 status:true })

 u.save();

 7、修改数据

 User.updateOne({ name: 'lisi2222' }, { name: '哈哈哈' }, function(err, res) { if(err){

 console.log(err);

 return; }

 console.log('成功') });

 **8**、删除数据

 User.deleteOne({ _id: '5b72ada84e284f0acc8d318a' }, function (err) { if (err) {

 console.log(err);

 return; }

 // deleted at most one tank document

 console.log('成功'); });

 **9**、保存成功查找

 var u=new User({ name:'lisi2222333',

 age:20,

 status:true //类型转换 })

 u.save(function(err,docs){ if(err){

 console.log(err);

 return; }

 //console.log(docs); User.find({},function(err,docs){

 if(err){ console.log(err);

 return; }

 console.log(docs); })

 });