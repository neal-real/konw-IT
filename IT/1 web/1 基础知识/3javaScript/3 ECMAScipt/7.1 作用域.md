[TOC]



## 作用域

- 全局作用域
  - 在函数外部定义的变量都是在全局作用域中
- 局部变量
  - 在函数内部定义的变量都在局部作用域
- 块级作用域
  - ES6之后在`{}`中使用 let 定义的变量的作用域就是块作用域

1. `if(){ // 这里就是块状作用域}`
2. 在块级作用域中通过var定义的变量是全局变量
3. 在局部作用域中通过var定义的变量是局部变量

无论是在块级作用域还是在局部作用域, 省略变量前面的let或者var就会变成一个挂载在全局对象 window 内的属性.并因为winidow 的特性可以省略,所以看起来像是全局变量

~~~js
// 无论是通过var还是通过let定义的全局变量, 都是从定义的那一行到文件末尾都可以使用
// var num = 123; // 全局变量
// let num = 123; // 全局变量

{
    // 如果是通过var定义的局部变量, 和全局变量一样, 后续都可以被使用
    // 如果是通过let定义的局部变量, 那么这个变量只能在当前定义变量的{}中使用
    // var num = 666; // 局部变量
    let num = 666; // 局部变量
    console.log(num);
}
console.log(num);
if(true){
    console.log(num);
}
~~~

## 什么是块作用域

1. 只要在 `{}` 中的变量,那么作用域不会超出这个范围, 且使用 let 声明的变量.就是块作用域的范围



## 第二个解释

## 作用域链

> **ES6 前后有区别**

### ES6 之前

>  **需要明确:**

1. ES6之前定义变量通过var
2. ES6之前没有块级作用域, 只有全局作用域和局部作用域
3. ES6之前函数大括号外的都是全局作用域
4. ES6之前函数大括号中的都是局部作用域

> **作用域链**

1. 全局作用域我们又称之为0级作用域
2. 定义函数开启的作用域就是1级/2级/3级/...作用域
3. JavaScript会将这些作用域链接在一起形成一个链条, 这个链条就是作用域链

​          0  --->  1 ---->  2  ---->  3 ----> 4

4. 除0级作用域以外, 当前作用域级别等于上一级+1

> **变量在作用域链查找规则**

1. 先在当前找, 找到就使用当前作用域找到的
2. 如果当前作用域中没有找到, 就去上一级作用域中查找
3. 以此类推直到0级为止, 如果0级作用域还没找到, 就报错



### ES6 之后

>  **需要明确:**

1. ES6定义变量通过let
2. ES6除了全局作用域、局部作用域以外, 还新增了块级作用域
3. ES6虽然新增了块级作用域, 但是通过 let 定义变量并无差异(都是局部变量)



> ES6作用域链

1. 全局作用域我们又称之为0级作用域
2. 2.定义函数或者代码块都会开启的作用域就是1级/2级/3级/...作用域
3. 3.JavaScript会将这些作用域链接在一起形成一个链条, 这个链条就是作用域链

​          0  --->  1 ---->  2  ---->  3 ----> 4

4. 除0级作用域以外, 当前作用域级别等于上一级+1



>  变量在作用域链查找规则

1. 先在当前找, 找到就使用当前作用域找到的
2. 如果当前作用域中没有找到, 就去上一级作用域中查找
3. 以此类推直到0级为止, 如果0级作用域还没找到, 就报错















































