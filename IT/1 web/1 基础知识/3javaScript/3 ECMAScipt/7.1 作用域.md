

## 作用域

1. 在JavaScript中定义变量有两种方式
   1. ES6之前: var 变量名称;
      1. 如果通过var定义变量, 可以重复定义同名的变量, 并且不会报错, 并且后定义的会覆盖先定义的
      2. 如果通过var定义变量, 可以先使用后定义(预解析)
      3. 无论是var还是let定义在{}外面都是全局变量
   2. ES6开始: let 变量名称;
      1. 如果通过let定义变量, 不可以重复定义同名的变量
      2. 如果通过let定义变量, 不可以先使用再定义, 因为浏览器不会对let定义的变量进行预解析
      3. 无论是var还是let定义在`{}`外面都是全局变量
2. 什么是全局变量
   1. 全局变量就是定义在`{}`外面的变量, 我们就称之为全局变量
   2. 无论是var还是let定义在`{}`外面都是全局变量
3. 什么是局部变量
   1. 局部变量就是定义在`{}`里面的变量, 我们就称之为局部变量
4. 全局变量和局部变量的区别
   1. 如果是全局变量, 那么有效范围是从定义变量的那一行开始直到文件的末尾都可以使用
   2. 如果是局部变量, 那么有效范围是从定义变量的那一行开始直到大括号结束为止(只有在大括号中才能使用)
5. 在**ES6**中只要{}没有和函数结合在一起, 那么应该"块级作用域"
   1. `if(){ // 这里就是块状作用域}`
   2. 在块级作用域中通过var定义的变量是全局变量
   3. 在局部作用域中通过var定义的变量是局部变量
6. 无论是在块级作用域还是在局部作用域, 省略变量前面的let或者var就会变成一个全局变量

~~~js
// 无论是通过var还是通过let定义的全局变量, 都是从定义的那一行到文件末尾都可以使用
// var num = 123; // 全局变量
// let num = 123; // 全局变量

{
    // 如果是通过var定义的局部变量, 和全局变量一样, 后续都可以被使用
    // 如果是通过let定义的局部变量, 那么这个变量只能在当前定义变量的{}中使用
    // var num = 666; // 局部变量
    let num = 666; // 局部变量
    console.log(num);
}
console.log(num);
if(true){
    console.log(num);
}
~~~





## 作用域链

> **ES6 前后有区别**

### ES6 之前

>  **需要明确:**

1. ES6之前定义变量通过var
2. ES6之前没有块级作用域, 只有全局作用域和局部作用域
3. ES6之前函数大括号外的都是全局作用域
4. ES6之前函数大括号中的都是局部作用域

> **作用域链**

1. 全局作用域我们又称之为0级作用域
2. 定义函数开启的作用域就是1级/2级/3级/...作用域
3. JavaScript会将这些作用域链接在一起形成一个链条, 这个链条就是作用域链

​          0  --->  1 ---->  2  ---->  3 ----> 4

4. 除0级作用域以外, 当前作用域级别等于上一级+1

> **变量在作用域链查找规则**

1. 先在当前找, 找到就使用当前作用域找到的
2. 如果当前作用域中没有找到, 就去上一级作用域中查找
3. 以此类推直到0级为止, 如果0级作用域还没找到, 就报错



### ES6 之后

>  **需要明确:**

1. ES6定义变量通过let
2. ES6除了全局作用域、局部作用域以外, 还新增了块级作用域
3. ES6虽然新增了块级作用域, 但是通过let定义变量并无差异(都是局部变量)



> ES6作用域链

1. 全局作用域我们又称之为0级作用域
2. 2.定义函数或者代码块都会开启的作用域就是1级/2级/3级/...作用域
3. 3.JavaScript会将这些作用域链接在一起形成一个链条, 这个链条就是作用域链

​          0  --->  1 ---->  2  ---->  3 ----> 4

4. 除0级作用域以外, 当前作用域级别等于上一级+1



>  变量在作用域链查找规则

1. 先在当前找, 找到就使用当前作用域找到的
2. 如果当前作用域中没有找到, 就去上一级作用域中查找
3. 以此类推直到0级为止, 如果0级作用域还没找到, 就报错















































