# 账号系统说明

`AS: accountSystem` 账号系统

- 通过index.ts 对外提供 api 接口,接受数据,返回结果的方式实现功能
- 使用 promise ,成功返回成功, 失败通过 `throw new Error("");` 返回信息

## 运行环境

- egg
- 把 AS 目录放入 `app/service` 目录下

#### 安装相关

1. 安装Egg脚手架

   `npm i egg-init -g`

2. 通过脚手架创建Egg TS项目

   ```shell
   # 初始化项目
   egg-init knowmap  --type=ts
   # 切换项目
   cd 项目目录之下
   # 安装依赖
   npm install
   # 运行项目
   npm run dev
   ```


## 模块组成

1. 校验模块
   1. 验证码
      1. 邮箱验证码的获取
      2. 邮箱验证码的校验
      3. 手机号验证码的获取
      4. 手机号验证码的校验
   2. 加密/鉴权模块
      1. jwt token 的返回
      2. jwt 信息的鉴定
      3. 字符串的单向加密
      4. 字符串的加密/解密
   3. 数据格式校验
2. 图片模块
   1. 给予 req,返回保存的 url
      1. 转存至TX对象存储
      2. 保存本地指定路径
3. 数据库模块
   1. 使用 mongose
4. 用户信息模块
   1. 注册模块
   2. 登录模块
   3. 重置密码模块
   4. 账号信息变更模块
   5. 已有用户,新增手机或邮箱绑定
